Package Source:	  python-django-openstack-auth


List of available patches
-------------------------
1000-cern-python-django-openstack-auth-ssl.patch

This file contains the patch to use a root certificate in the client side of
the ssl configuration and also enable the --insecure option (self-signed certs)


How to apply
------------

1) Download and install the latest RPM for the package to use

   yumdownloader --source python-django-openstack-auth


2) Copy the patches into the SOURCES folder (~/rpmbuild/SOURCES)

   cp 1000-cern-python-django-openstack-auth-ssl.patch ~/rpmbuild/SOURCES

3) Add the version of the package to the Release field

   ...
   Name:           python-django-openstack-auth
   Version:        1.0.2
   Release:        3%{?dist}.2
   Summary:        Django authentication backend for OpenStack Keystone
   ...


4) Add the patch at the end of the list of patches on the spec file in the SPECS folder (~/rpmbuild/SPECS)

   ...
   License:        BSD
   URL:            http://pypi.python.org/pypi/django_openstack_auth/1.0.2
   Source0:        http://pypi.python.org/packages/source/d/%{pypi_name}/%{pypi_name}-%{version}.tar.gz

   # CERN Patches
   Patch1000:      1000-cern-python-django-openstack-auth-ssl.patch
   ...


5) Add the patch in the %prep section after all the previous patches have been applied 

   ...
   %prep
   %setup -q -n %{pypi_name}-%{version}
 
   # CERN Patches
   %patch1000 -p0
   ...
  

6) Add a relevant entry on the %changelog section at the beginning. By convention we append ai6.n

   ...
   %changelog
   * Tue Feb 05 2013 Jose Castro Leon <jose.castro.leon@cern.ch> - 1.0.2-3.ai6.2
   - Solve issues with SSL validation

   * Tue Feb 05 2013 Jose Castro Leon <jose.castro.leon@cern.ch> - 1.0.2-3.ai6.1
   - Include CERN client patch for SSL validation

   * Tue Oct 16 2012 Matthias Runge <mrunge@redhat.com> - 1.0.2-3
   - fix build on EPEL6, require Django14 package on EPEL6
   - handle languages by hand on EL6
   ...

7) Build the source rpm from the spec file with the dist option set to ai6

   rpmbuild -ba ~/rpmbuild/SPECS/python-django-openstack-auth.spec --define 'dist .ai6'


8) Submit the source rpm into koji

   koji build ai6 ~/rpmbuild/SRPMS/python-django-openstack-auth-1.0.2-3.ai6.2.src.rpm

